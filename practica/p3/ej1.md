Considerando que el hecho que "A destruya la casa" es código que se ejecutaría después de finalizar el wait sobre la variable de condición, el código mostrado es correcto, es decir, evita que A vea que falta el pan y manteca.
Esto se debe a que wait espera a que le llegue el signal en cumplimiento con la variable de condición, e inmediatamente después de ello intenta obtener un lock sobre el mutex al que hace referencia. Si este mutex todavía está bloqueado, no se pasa del wait ya que no puede obtener este lock, y es de hecho lo que sucede en este caso. En efecto, incluso si al hacer ´pthread_cond_signal´ se produce un cambio de contexto en B que hace que A se ejecute, el mutex ´lk´ todavía estaría bloqueado, impidiéndole a A seguir su ejecución hasta que B lo desbloquee, lo cual sólo sucede después de que se establece ´M = true;´ también. Así, si bien A "se puede despertar" con signal, no va a pasar del wait hasta que también el lock esté desbloqueado. Por lo tanto, hacer signal antes de ejecutar ´M = true;´ en B es, en todo caso, algo ineficiente.